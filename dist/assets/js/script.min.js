const newTask=document.getElementById("new-task"),add=document.getElementById("add"),tasks=document.getElementById("tasks"),todoBody=document.querySelector(".toDo-tasks"),toDoList=document.querySelector(".toDo__list"),toDoTask=document.querySelector(".toDo__task");let task,comleted,taskMassive=[];const localStorageTodosit=JSON.parse(localStorage.getItem("todo"));function handlerWindowLoad(){tasksRender(taskMassive=localStorageTodosit||[]),renderTaskCount(taskMassive)}function addToTasks(){var e=newTask.value;e&&isNotHaveTask(e,taskMassive)&&(addTask(e,taskMassive),newTask.value="",tasksRender(taskMassive))}function addTask(e,t){var a=Date.now();t.push({id:a,text:e,isComplete:!1}),localStorage.setItem("todo",JSON.stringify(t))}function isNotHaveTask(t,e){let a=!0;return e.forEach(e=>{e.text===t&&(alert("Task already exists"),a=!1)}),a}function tasksRender(e){let s="";e.forEach(e=>{var t=e.isComplete?"toDo__task toDo__task_complete":"toDo__task",a=e.isComplete?"checked":"",t=`<li id = "${e.id}" class="${t}" >
    <label class="toDo__checkbox">
      <input type="checkbox" ${a} />
      <div class="toDo__checkbox-div">
        <div class="toDo__checkbox-div__innner"></div>
      </div>
    </label>
    <div class="toDo__task-text">${e.text}</div>
    <button class="toDo__task-del">
                      <img
                        class="toDo__task-del__img"
                        src="./assets/images/close.svg"
                        alt="close"
                      />
    </button>
  </li>
`;s+=t}),tasks.innerHTML=s,renderTaskCount(taskMassive)}function changeTaskStatus(t,e){e.forEach(e=>{e.id==t&&(e.isComplete=!e.isComplete)})}function deleteTask(a,s){s.forEach((e,t)=>{e.id==a&&(s.splice(t,1),localStorage.setItem("todo",JSON.stringify(s)))})}function renderTaskCount(e){document.getElementById("count").innerHTML=e.length}window.addEventListener("load",()=>{localStorageTodosit&&handlerWindowLoad()}),add.addEventListener("click",()=>{addToTasks()}),document.addEventListener("keyup",e=>{"Enter"===e.code&&addToTasks()}),tasks.addEventListener("click",e=>{var e=e.target,t=e.classList.contains("toDo__checkbox-div__innner"),a=e.classList.contains("toDo__task-del__img");t&&(changeTaskStatus(e.parentElement.parentElement.parentElement.getAttribute("id"),taskMassive),tasksRender(taskMassive),renderTaskCount(taskMassive),localStorage.setItem("todo",JSON.stringify(taskMassive))),a&&(deleteTask(e.parentElement.parentElement.getAttribute("id"),taskMassive),tasksRender(taskMassive),renderTaskCount(taskMassive))});const taskArea=document.querySelector(".toDo-tasks");if(taskArea){const H=taskArea.querySelector(".toDo-tasks__menu");H&&(H.querySelector(".completed").addEventListener("click",()=>{taskArea.querySelectorAll(".toDo__task").forEach(e=>{e.classList.contains("toDo__task_complete")?e.style.display="flex":e.style.display="none"})}),H.querySelector(".active").addEventListener("click",()=>{taskArea.querySelectorAll(".toDo__task").forEach(e=>{e.style.display="flex",e.classList.contains("toDo__task_complete")&&(e.style.display="none")})}),H.querySelector(".all").addEventListener("click",()=>{taskArea.querySelectorAll(".toDo__task").forEach(e=>{e.style.display="flex"})}),H.querySelector(".toDo-clear__btn").addEventListener("click",()=>{taskArea.querySelectorAll(".toDo__task_complete").forEach(e=>{e.remove(),deleteTask(e.getAttribute("id"),taskMassive),renderTaskCount(taskMassive)})}))}const header__btn=document.querySelector(".header-icon");function addDark(){try{"dark"===localStorage.getItem("theme")?document.querySelector("html").classList.add("dark"):document.querySelector("html").classList.remove("dark")}catch(e){}}function hideArea(){for(var e=document.querySelector(".hide"),t=document.querySelector(".toDo-folders");0!=t.childNodes.length;)e.appendChild(t.childNodes[0])}header__btn.addEventListener("click",e=>{e.preventDefault(),"dark"===localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark"),addDark()}),addDark(),new Sortable.create(toDoList,{animation:350}),window.matchMedia("(max-width: 510px)").matches&&hideArea();